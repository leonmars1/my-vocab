<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å››å¤§ä¸»é¢˜è¯æ±‡èƒŒè¯µç³»ç»Ÿ v2.0</title>
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
            --success: #22c55e;
            --error: #ef4444;
            --warning: #f59e0b;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 600px;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 { margin: 0 0 10px 0; font-size: 1.5rem; }
        
        .controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        button {
            padding: 8px 14px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-size: 0.9rem;
        }

        button.active { background: var(--primary); color: white; }
        button:hover { transform: translateY(-1px); filter: brightness(0.95); }
        button:active { transform: translateY(0); }

        .card {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: relative;
        }

        .category-tag {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 0.8rem;
            color: #94a3b8;
            background: #f1f5f9;
            padding: 4px 8px;
            border-radius: 4px;
        }

        /* é¡¶éƒ¨åŠŸèƒ½åŒºï¼šå‘éŸ³ */
        .top-tools {
            position: absolute;
            top: 15px;
            left: 15px;
        }
        .sound-btn {
            background: #e0f2fe;
            color: #0284c7;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .question-word {
            font-size: 1.8rem;
            font-weight: bold;
            margin-top: 25px;
            margin-bottom: 15px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.3;
        }

        .hint-text {
            color: #64748b;
            font-style: italic;
            margin-bottom: 15px;
            height: 24px;
            font-size: 0.95rem;
            transition: color 0.3s;
        }
        .hint-reveal {
            color: var(--error);
            font-weight: bold;
            font-style: normal;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
        }

        input:focus { border-color: var(--primary); }

        .action-btn {
            background: var(--primary);
            color: white;
            padding: 12px 24px;
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            display: none;
            font-weight: bold;
        }
        .feedback.correct { background: #dcfce7; color: #15803d; display: block; }
        .feedback.wrong { background: #fee2e2; color: #b91c1c; display: block; }

        .tools {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            gap: 10px;
        }

        .hint-btn { background: var(--warning); color: white; flex: 1; }
        .nav-btn { background: #64748b; color: white; flex: 1; }

        /* Mistake Notebook Styles */
        .mistake-section {
            margin-top: 40px;
            width: 100%;
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-sizing: border-box;
        }
        
        .mistake-list {
            list-style: none;
            padding: 0;
        }

        .mistake-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #f1f5f9;
            align-items: center;
        }
        .mistake-item span { font-size: 0.9rem; }
        .mistake-item .word { font-weight: bold; color: var(--error); cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>VOCAB MASTER v2.0</h1>
    </header>

    <div class="controls" id="categoryControls">
        <button class="active" onclick="setCategory('all')">å…¨éƒ¨</button>
        <button onclick="setCategory('AIGC')">AIGC</button>
        <button onclick="setCategory('NEV')">æ–°èƒ½æº</button>
        <button onclick="setCategory('Live')">ç›´æ’­ç”µå•†</button>
        <button onclick="setCategory('Tech')">ç§‘æŠ€è‡ªç«‹</button>
    </div>

    <div class="controls">
        <button id="modeBtn" onclick="toggleMode()">å½“å‰æ¨¡å¼ï¼šçœ‹ä¸­æ–‡å†™è‹±æ–‡ (é»˜å†™)</button>
    </div>

    <div class="card">
        <div class="category-tag" id="currentCategory">AIGC</div>
        
        <div class="top-tools">
            <button class="sound-btn" onclick="speakCurrentWord()" title="æœ—è¯»å•è¯">ğŸ”Š</button>
        </div>
        
        <div class="question-word" id="question">Loading...</div>
        <div class="hint-text" id="hintBox"></div>

        <div class="input-group">
            <input type="text" id="answerInput" placeholder="åœ¨æ­¤è¾“å…¥ç­”æ¡ˆ..." autocomplete="off">
            <button class="action-btn" onclick="checkAnswer()">æäº¤</button>
        </div>

        <div class="feedback" id="feedback"></div>

        <div class="tools">
            <button class="nav-btn" onclick="prevWord()">â¬…ï¸ ä¸Šä¸€ä¸ª</button>
            <button class="hint-btn" onclick="showHint()" id="hintBtn">ğŸ’¡ æç¤º</button>
            <button class="nav-btn" onclick="nextWord()">ä¸‹ä¸€ä¸ª â¡ï¸</button>
        </div>
    </div>

    <div class="mistake-section" id="mistakeSection" style="display:none;">
        <h3>ğŸ“• é”™é¢˜æœ¬ (<span id="mistakeCount">0</span>)</h3>
        <p style="font-size:0.8rem; color:#64748b;">ç‚¹å‡»å•è¯å¯æœ—è¯»</p>
        <ul class="mistake-list" id="mistakeList"></ul>
        <button onclick="clearMistakes()" style="margin-top:10px; font-size:0.8rem; background:#fee2e2; color:#b91c1c;">æ¸…ç©ºé”™é¢˜æœ¬</button>
    </div>
</div>

<script>
    // è¯æ±‡æ•°æ®åº“
    const vocabularyDB = [
        // Source: AIGC
        { en: "generative AI", cn: "ç”Ÿæˆå¼äººå·¥æ™ºèƒ½", ipa: "/ËˆdÊ’É›nÉ™rÉ™tÉªv ËŒeÉªËˆaÉª/", tag: "AIGC" },
        { en: "large language model (LLM)", cn: "å¤§è¯­è¨€æ¨¡å‹", ipa: "/lÉ‘ËrdÊ’ ËˆlÃ¦Å‹É¡wÉªdÊ’ ËˆmÉ’dÉ™l/", tag: "AIGC" },
        { en: "foundation model", cn: "åŸºç¡€æ¨¡å‹", ipa: "/faÊŠnËˆdeÉªÊƒÉ™n ËˆmÉ’dÉ™l/", tag: "AIGC" },
        { en: "multimodal model", cn: "å¤šæ¨¡æ€æ¨¡å‹", ipa: "/ËŒmÊŒltiËˆmoÊŠdÉ™l ËˆmÉ’dÉ™l/", tag: "AIGC" },
        { en: "prompt engineering", cn: "æç¤ºè¯å·¥ç¨‹", ipa: "/prÉ’mpt ËŒendÊ’É™ËˆnÉªÉ™rÉªÅ‹/", tag: "AIGC" },
        { en: "fine-tuning", cn: "å¾®è°ƒ", ipa: "/faÉªn ËˆtuËnÉªÅ‹/", tag: "AIGC" },
        { en: "supervised learning", cn: "ç›‘ç£å­¦ä¹ ", ipa: "/ËˆsuËpÉ™rvaÉªzd ËˆlÉœËrnÉªÅ‹/", tag: "AIGC" },
        { en: "reinforcement learning", cn: "å¼ºåŒ–å­¦ä¹ ", ipa: "/ËŒriËÉªnËˆfÉ”ËrsmÉ™nt ËˆlÉœËrnÉªÅ‹/", tag: "AIGC" },
        { en: "hallucination", cn: "AIå¹»è§‰", ipa: "/hÉ™ËŒluËsÉªËˆneÉªÊƒÉ™n/", tag: "AIGC" },
        { en: "model alignment", cn: "æ¨¡å‹å¯¹é½", ipa: "/É™ËˆlaÉªnmÉ™nt/", tag: "AIGC" },
        { en: "inference", cn: "æ¨ç†", ipa: "/ËˆÉªnfÉ™rÉ™ns/", tag: "AIGC" },
        { en: "training data", cn: "è®­ç»ƒæ•°æ®", ipa: "/ËˆtreÉªnÉªÅ‹ ËˆdeÉªtÉ™/", tag: "AIGC" },
        { en: "parameter", cn: "å‚æ•°", ipa: "/pÉ™ËˆrÃ¦mÉªtÉ™r/", tag: "AIGC" },
        { en: "token", cn: "è¯å…ƒ", ipa: "/ËˆtoÊŠkÉ™n/", tag: "AIGC" },
        { en: "context window", cn: "ä¸Šä¸‹æ–‡çª—å£", ipa: "/ËˆkÉ’ntekst ËˆwÉªndoÊŠ/", tag: "AIGC" },
        { en: "vector embedding", cn: "å‘é‡åµŒå…¥", ipa: "/ËˆvÉ›ktÉ™r ÉªmËˆbÉ›dÉªÅ‹/", tag: "AIGC" },
        { en: "retrieval-augmented generation (RAG)", cn: "æ£€ç´¢å¢å¼ºç”Ÿæˆ", ipa: "/rÉªËˆtriËvÉ™l.../", tag: "AIGC" },
        { en: "API integration", cn: "APIé›†æˆ", ipa: "/ËŒeÉªpiËËˆaÉª ËŒÉªntÉªËˆgreÉªÊƒÉ™n/", tag: "AIGC" },
        { en: "model latency", cn: "æ¨¡å‹å»¶è¿Ÿ", ipa: "/ËˆleÉªtÉ™nsi/", tag: "AIGC" },
        { en: "compute power", cn: "ç®—åŠ›", ipa: "/kÉ™mËˆpjuËt ËˆpaÊŠÉ™r/", tag: "AIGC" },
        { en: "bias and fairness", cn: "åè§ä¸å…¬å¹³", ipa: "/baÉªÉ™s Ã¦nd ËˆfÎµÉ™rnÉ™s/", tag: "AIGC" },
        { en: "data privacy", cn: "æ•°æ®éšç§", ipa: "/ËˆdeÉªtÉ™ ËˆpraÉªvÉ™si/", tag: "AIGC" },
        { en: "intellectual property", cn: "çŸ¥è¯†äº§æƒ", ipa: "/ËŒÉªntÉ™ËˆlÉ›ktÊƒuÉ™l ËˆprÉ’pÉ™rti/", tag: "AIGC" },
        { en: "content authenticity", cn: "å†…å®¹çœŸå®æ€§", ipa: "/kÉ’nËˆtÉ›nt É”ËËˆÎ¸entÉªsÉªti/", tag: "AIGC" },
        { en: "agentic AI", cn: "è‡ªä¸»å‹AI", ipa: "/eÉªËˆdÊ’É›ntÉªk eÉªËˆaÉª/", tag: "AIGC" },

        // Source: NEV
        { en: "new energy vehicle (NEV)", cn: "æ–°èƒ½æºè½¦", ipa: "/nuË ËˆÉ›nÉ™rdÊ’i ËˆviËÉ™kÉ™l/", tag: "NEV" },
        { en: "electric vehicle (EV)", cn: "çº¯ç”µåŠ¨æ±½è½¦", ipa: "/ÉªËˆlÉ›ktrÉªk ËˆviËÉ™kÉ™l/", tag: "NEV" },
        { en: "battery electric vehicle (BEV)", cn: "çº¯ç”µåŠ¨è½¦", ipa: "/ËˆbÃ¦tÉ™ri ÉªËˆlÉ›ktrÉªk ËˆviËÉ™kÉ™l/", tag: "NEV" },
        { en: "plug-in hybrid electric vehicle (PHEV)", cn: "æ’ç”µæ··åŠ¨", ipa: "/plÊŒÉ¡ Éªn ËˆhaÉªbrÉªd/", tag: "NEV" },
        { en: "fuel cell vehicle (FCV)", cn: "ç‡ƒæ–™ç”µæ± è½¦", ipa: "/ËˆfjuËÉ™l sÉ›l ËˆviËÉ™kÉ™l/", tag: "NEV" },
        { en: "lithium-ion battery", cn: "é”‚ç”µæ± ", ipa: "/ËˆlÉªÎ¸iÉ™m ËˆaÉªÉ™n.../", tag: "NEV" },
        { en: "solid-state battery", cn: "å›ºæ€ç”µæ± ", ipa: "/ËˆsÉ’lÉªd steÉªt ËˆbÃ¦tÉ™ri/", tag: "NEV" },
        { en: "energy density", cn: "èƒ½é‡å¯†åº¦", ipa: "/ËˆÉ›nÉ™rdÊ’i ËˆdÉ›nsÉ™ti/", tag: "NEV" },
        { en: "charging infrastructure", cn: "å……ç”µåŸºç¡€è®¾æ–½", ipa: "/ËˆtÊƒÉ‘ËrdÊ’ÉªÅ‹ ËˆÉªnfrÉ™strÊŒktÊƒÉ™r/", tag: "NEV" },
        { en: "fast charging", cn: "å¿«å……", ipa: "/fÃ¦st ËˆtÊƒÉ‘ËrdÊ’ÉªÅ‹/", tag: "NEV" },
        { en: "battery swap", cn: "æ¢ç”µ", ipa: "/ËˆbÃ¦tÉ™ri swÉ’p/", tag: "NEV" },
        { en: "range anxiety", cn: "ç»­èˆªç„¦è™‘", ipa: "/reÉªndÊ’ Ã¦Å‹ËˆzaÉªÉ™ti/", tag: "NEV" },
        { en: "regenerative braking", cn: "å†ç”Ÿåˆ¶åŠ¨", ipa: "/ËŒrÉ›dÊ’É™ËˆnerÉ™tÉªv.../", tag: "NEV" },
        { en: "powertrain", cn: "åŠ¨åŠ›ç³»ç»Ÿ", ipa: "/ËˆpaÊŠÉ™rtreÉªn/", tag: "NEV" },
        { en: "thermal management", cn: "çƒ­ç®¡ç†", ipa: "/ËˆÎ¸ÉœËrmÉ™l ËˆmÃ¦nÉªdÊ’mÉ™nt/", tag: "NEV" },
        { en: "carbon neutrality", cn: "ç¢³ä¸­å’Œ", ipa: "/ËˆkÉ‘ËrbÉ™n njuËËˆtrÃ¦lÉ™ti/", tag: "NEV" },
        { en: "lifecycle emissions", cn: "å…¨ç”Ÿå‘½å‘¨æœŸæ’æ”¾", ipa: "/ËˆlaÉªfsaÉªkl ÉªËˆmÉªÊƒÉ™nz/", tag: "NEV" },
        { en: "smart mobility", cn: "æ™ºæ…§å‡ºè¡Œ", ipa: "/smÉ‘Ërt mÉ™ËˆbÉªlÉ™ti/", tag: "NEV" },
        { en: "autonomous driving", cn: "è‡ªåŠ¨é©¾é©¶", ipa: "/É”ËËˆtÉ’nÉ™mÉ™s ËˆdraÉªvÉªÅ‹/", tag: "NEV" },
        { en: "vehicle-to-grid (V2G)", cn: "è½¦ç½‘äº’åŠ¨", ipa: "/ËˆviËÉ™kÉ™l tuË É¡rÉªd/", tag: "NEV" },
        { en: "rare earth materials", cn: "ç¨€åœŸ", ipa: "/reÉ™(r) ÉœËrÎ¸.../", tag: "NEV" },
        { en: "battery recycling", cn: "ç”µæ± å›æ”¶", ipa: "/ËˆbÃ¦tÉ™ri riËËˆsaÉªklÉªÅ‹/", tag: "NEV" },
        { en: "supply chain resilience", cn: "ä¾›åº”é“¾éŸ§æ€§", ipa: "/sÉ™ËˆplaÉª tÊƒeÉªn rÉªËˆzÉªliÉ™ns/", tag: "NEV" },
        { en: "total cost of ownership (TCO)", cn: "å…¨ç”Ÿå‘½å‘¨æœŸæˆæœ¬", ipa: "/ËˆtÉ™ÊŠtÉ™l kÉ’st.../", tag: "NEV" },
        { en: "over-the-air update (OTA)", cn: "è¿œç¨‹å‡çº§", ipa: "/ËŒÉ™ÊŠvÉ™r Ã°i ËˆeÉ™r.../", tag: "NEV" },

        // Source: Live Commerce
        { en: "live commerce", cn: "ç›´æ’­ç”µå•†", ipa: "/laÉªv ËˆkÉ’mÉœËrs/", tag: "Live" },
        { en: "livestreaming", cn: "ç›´æ’­", ipa: "/ËˆlaÉªvstriËmÉªÅ‹/", tag: "Live" },
        { en: "host / streamer", cn: "ä¸»æ’­", ipa: "/hÉ™ÊŠst/", tag: "Live" },
        { en: "product demonstration", cn: "äº§å“å±•ç¤º", ipa: "/ËˆprÉ’dÊŒkt.../", tag: "Live" },
        { en: "conversion rate", cn: "è½¬åŒ–ç‡", ipa: "/kÉ™nËˆvÉœËÊƒÉ™n.../", tag: "Live" },
        { en: "engagement", cn: "äº’åŠ¨åº¦", ipa: "/ÉªnËˆÉ¡eÉªdÊ’mÉ™nt/", tag: "Live" },
        { en: "call to action (CTA)", cn: "è¡ŒåŠ¨å·å¬", ipa: "/kÉ”Ël tuË ËˆÃ¦kÊƒÉ™n/", tag: "Live" },
        { en: "traffic boosting", cn: "å¼•æµ", ipa: "/ËˆtrÃ¦fÉªk.../", tag: "Live" },
        { en: "algorithmic recommendation", cn: "ç®—æ³•æ¨è", ipa: "/ËŒÃ¦lÉ¡É™ËˆrÉªÃ°mÉªk.../", tag: "Live" },
        { en: "impulse buying", cn: "å†²åŠ¨æ¶ˆè´¹", ipa: "/ËˆÉªmpÊŒls ËˆbaÉªÉªÅ‹/", tag: "Live" },
        { en: "flash sale", cn: "é™æ—¶æŠ¢è´­", ipa: "/flÃ¦Êƒ seÉªl/", tag: "Live" },
        { en: "user retention", cn: "ç”¨æˆ·ç•™å­˜", ipa: "/ËˆjuËzÉ™r.../", tag: "Live" },
        { en: "influencer marketing", cn: "ç½‘çº¢è¥é”€", ipa: "/ËˆÉªnfluÉ™nsÉ™r.../", tag: "Live" },
        { en: "brand authenticity", cn: "å“ç‰ŒçœŸå®æ„Ÿ", ipa: "/brÃ¦nd É”ËËˆÎ¸entÉªsÉªti/", tag: "Live" },
        { en: "merchandise return rate", cn: "é€€è´§ç‡", ipa: "/ËˆmÉœËrtÊƒÉ™ndaÉªz.../", tag: "Live" },
        { en: "logistics fulfillment", cn: "ç‰©æµå±¥çº¦", ipa: "/lÉ™ËˆdÊ’ÉªstÉªks.../", tag: "Live" },
        { en: "digital payment", cn: "æ•°å­—æ”¯ä»˜", ipa: "/ËˆdÉªdÊ’ÉªtÉ™l.../", tag: "Live" },
        { en: "average order value (AOV)", cn: "å®¢å•ä»·", ipa: "/ËˆÃ¦vÉ™rÉªdÊ’.../", tag: "Live" },
        { en: "viewership", cn: "è§‚çœ‹äººæ•°", ipa: "/ËˆvjuËÉ™rÊƒÉªp/", tag: "Live" },
        { en: "playback", cn: "å›æ”¾é‡", ipa: "/ËˆpleÉªbÃ¦k/", tag: "Live" },
        { en: "content moderation", cn: "å†…å®¹å®¡æ ¸", ipa: "/ËˆkÉ’ntent.../", tag: "Live" },
        { en: "consumer protection", cn: "æ¶ˆè´¹è€…ä¿æŠ¤", ipa: "/kÉ™nËˆsjuËmÉ™r.../", tag: "Live" },
        { en: "data analytics", cn: "æ•°æ®åˆ†æ", ipa: "/ËˆdeÉªtÉ™.../", tag: "Live" },
        { en: "personalization", cn: "ä¸ªæ€§åŒ–", ipa: "/ËŒpÉœËrsÉ™nÉ™lÉ™ËˆzeÉªÊƒÉ™n/", tag: "Live" },
        { en: "viewer retention rate", cn: "è§‚ä¼—ç•™å­˜ç‡", ipa: "/ËˆvjuËÉ™r.../", tag: "Live" },

        // Source: Tech Self-reliance
        { en: "technological self-reliance", cn: "ç§‘æŠ€è‡ªç«‹è‡ªå¼º", ipa: "/ËŒtÉ›knÉ™ËˆlÉ’dÊ’ÉªkÉ™l sÉ›lf.../", tag: "Tech" },
        { en: "strategic autonomy", cn: "æˆ˜ç•¥è‡ªä¸»", ipa: "/strÉ™ËˆtiËdÊ’Éªk É”ËËˆtÉ’nÉ™mi/", tag: "Tech" },
        { en: "core technologies", cn: "æ ¸å¿ƒæŠ€æœ¯", ipa: "/kÉ”Ër tÉ›kËˆnÉ’lÉ™dÊ’iz/", tag: "Tech" },
        { en: "innovation ecosystem", cn: "åˆ›æ–°ç”Ÿæ€", ipa: "/ËŒÉªnÉ™ËˆveÉªÊƒÉ™n.../", tag: "Tech" },
        { en: "key enabling technologies", cn: "å…³é”®ä½¿èƒ½æŠ€æœ¯", ipa: "/kiË ÉªËˆneÉªblÉªÅ‹.../", tag: "Tech" },
        { en: "supply chain security", cn: "ä¾›åº”é“¾å®‰å…¨", ipa: "/sÉ™ËˆplaÉª tÊƒeÉªn.../", tag: "Tech" },
        { en: "technological sovereignty", cn: "ç§‘æŠ€ä¸»æƒ", ipa: "/ËŒtÉ›knÉ™ËˆlÉ’dÊ’ÉªkÉ™l.../", tag: "Tech" },
        { en: "indigenous innovation", cn: "è‡ªä¸»åˆ›æ–°", ipa: "/ÉªnËˆdÉªdÊ’ÉªnÉ™s.../", tag: "Tech" },
        { en: "intellectual property rights", cn: "çŸ¥è¯†äº§æƒ", ipa: "/ËŒÉªntÉ™ËˆlÉ›ktÊƒuÉ™l.../", tag: "Tech" },
        { en: "research and development", cn: "ç ”å‘", ipa: "/ËŒÉ‘Ër É™n ËˆdiË/", tag: "Tech" },
        { en: "semiconductor manufacturing", cn: "åŠå¯¼ä½“åˆ¶é€ ", ipa: "/ËŒsÉ›mÉª.../", tag: "Tech" },
        { en: "critical infrastructure", cn: "å…³é”®åŸºç¡€è®¾æ–½", ipa: "/ËˆkrÉªtÉªkÉ™l.../", tag: "Tech" },
        { en: "technological bottleneck", cn: "æŠ€æœ¯ç“¶é¢ˆ", ipa: "/ËŒtÉ›knÉ™ËˆlÉ’dÊ’ÉªkÉ™l.../", tag: "Tech" },
        { en: "strategic emerging industries", cn: "æˆ˜ç•¥æ€§æ–°å…´äº§ä¸š", ipa: "/strÉ™ËˆtiËdÊ’Éªk.../", tag: "Tech" },
        { en: "high-tech manufacturing", cn: "é«˜æŠ€æœ¯åˆ¶é€ ", ipa: "/haÉª tÉ›k.../", tag: "Tech" },
        { en: "technology transfer", cn: "æŠ€æœ¯è½¬ç§»", ipa: "/tÉ›kËˆnÉ’lÉ™dÊ’i.../", tag: "Tech" },
        { en: "knowledge-intensive industries", cn: "çŸ¥è¯†å¯†é›†å‹äº§ä¸š", ipa: "/ËˆnÉ’lÉªdÊ’.../", tag: "Tech" },
        { en: "open innovation", cn: "å¼€æ”¾å¼åˆ›æ–°", ipa: "/ËˆÉ™ÊŠpÉ™n.../", tag: "Tech" },
        { en: "digital infrastructure", cn: "æ•°å­—åŸºç¡€è®¾æ–½", ipa: "/ËˆdÉªdÊ’ÉªtÉ™l.../", tag: "Tech" },
        { en: "technological resilience", cn: "æŠ€æœ¯éŸ§æ€§", ipa: "/ËŒtÉ›knÉ™ËˆlÉ’dÊ’ÉªkÉ™l.../", tag: "Tech" },
        { en: "national innovation capacity", cn: "å›½å®¶åˆ›æ–°èƒ½åŠ›", ipa: "/ËˆnÃ¦ÊƒÉ™nÉ™l.../", tag: "Tech" },
        { en: "frontier technologies", cn: "å‰æ²¿æŠ€æœ¯", ipa: "/ËˆfrÊŒntÉªÉ™r.../", tag: "Tech" },
        { en: "talent cultivation", cn: "äººæ‰åŸ¹å…»", ipa: "/ËˆtÃ¦lÉ™nt.../", tag: "Tech" },
        { en: "industrial upgrading", cn: "äº§ä¸šå‡çº§", ipa: "/ÉªnËˆdÊŒstriÉ™l.../", tag: "Tech" },
        { en: "self-sustaining innovation capability", cn: "è‡ªæˆ‘æŒç»­åˆ›æ–°èƒ½åŠ›", ipa: "/sÉ›lf sÉ™ËˆsteÉªnÉªÅ‹.../", tag: "Tech" }
    ];

    // State Variables
    let currentList = [];
    let currentIndex = 0;
    let mode = 'cn-to-en'; // 'cn-to-en' or 'en-to-cn'
    let mistakes = [];
    let hintClickCount = 0; // NEW: Counter for hint clicks

    // Initialization
    window.onload = function() {
        setCategory('all');
        
        // Bind Enter key
        document.getElementById("answerInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                checkAnswer();
            }
        });
    };

    // Logic Functions
    function setCategory(cat) {
        const buttons = document.querySelector('#categoryControls').children;
        for (let btn of buttons) {
            btn.classList.remove('active');
            if (btn.innerText.includes(cat === 'all' ? 'å…¨éƒ¨' : cat === 'Live' ? 'ç›´æ’­' : cat === 'Tech' ? 'ç§‘æŠ€' : cat === 'NEV' ? 'æ–°èƒ½æº' : cat)) {
                btn.classList.add('active');
            }
        }

        if (cat === 'all') {
            currentList = [...vocabularyDB];
        } else {
            currentList = vocabularyDB.filter(item => item.tag === cat);
        }

        currentList.sort(() => Math.random() - 0.5);
        currentIndex = 0;
        loadWord();
    }

    function toggleMode() {
        mode = mode === 'cn-to-en' ? 'en-to-cn' : 'cn-to-en';
        const btn = document.getElementById('modeBtn');
        btn.innerText = mode === 'cn-to-en' ? 'å½“å‰æ¨¡å¼ï¼šçœ‹ä¸­æ–‡å†™è‹±æ–‡ (é»˜å†™)' : 'å½“å‰æ¨¡å¼ï¼šçœ‹è‹±æ–‡å†™ä¸­æ–‡ (ç¿»è¯‘)';
        loadWord();
    }

    function loadWord() {
        if (currentList.length === 0) return;
        
        const item = currentList[currentIndex];
        const questionEl = document.getElementById('question');
        const hintEl = document.getElementById('hintBox');
        const inputEl = document.getElementById('answerInput');
        const feedbackEl = document.getElementById('feedback');
        const catTag = document.getElementById('currentCategory');
        const hintBtn = document.getElementById('hintBtn');

        // Reset UI states
        feedbackEl.className = 'feedback';
        feedbackEl.style.display = 'none';
        hintEl.innerText = '';
        hintEl.className = 'hint-text'; // remove reveal class
        inputEl.value = '';
        inputEl.focus();
        catTag.innerText = item.tag;
        hintBtn.innerText = "ğŸ’¡ æç¤º"; // Reset button text
        
        // Reset Logic
        hintClickCount = 0; 

        if (mode === 'cn-to-en') {
            questionEl.innerText = item.cn;
            inputEl.placeholder = "è¾“å…¥è‹±æ–‡å•è¯...";
        } else {
            questionEl.innerText = item.en;
            inputEl.placeholder = "è¾“å…¥ä¸­æ–‡å«ä¹‰...";
        }
    }

    // NEW: Pronunciation Function
    function speakCurrentWord() {
        if (currentList.length === 0) return;
        const item = currentList[currentIndex];
        
        // Use Web Speech API
        const utterance = new SpeechSynthesisUtterance(item.en);
        utterance.lang = 'en-US'; // American English
        utterance.rate = 0.9; // Slightly slower for clarity
        window.speechSynthesis.speak(utterance);
    }

    function speakText(text) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'en-US'; 
        window.speechSynthesis.speak(utterance);
    }

    // UPDATED: Hint Function with 3-Click Logic
    function showHint() {
        const item = currentList[currentIndex];
        const hintEl = document.getElementById('hintBox');
        const hintBtn = document.getElementById('hintBtn');
        
        hintClickCount++;

        if (hintClickCount === 1) {
            // Level 1: Standard Hint
            if (mode === 'cn-to-en') {
                hintEl.innerText = `IPA: ${item.ipa}  |  é¦–å­—æ¯: ${item.en.charAt(0)}`;
            } else {
                hintEl.innerText = `IPA: ${item.ipa}  |  é¦–å­—: ${item.cn.charAt(0)}`;
            }
            hintBtn.innerText = "ğŸ’¡ å†ç‚¹æ˜¾ç¤ºæ›´å¤š";
        } else if (hintClickCount === 2) {
            // Level 2: Encouragement
            hintEl.innerText += " (å†ç‚¹ä¸€æ¬¡æ˜¾ç¤ºç­”æ¡ˆ)";
            hintBtn.innerText = "ğŸ’¡ æ˜¾ç¤ºç­”æ¡ˆ";
        } else if (hintClickCount >= 3) {
            // Level 3: Reveal Answer
            const answer = mode === 'cn-to-en' ? item.en : item.cn;
            hintEl.innerHTML = `ç­”æ¡ˆ: <span class="hint-reveal">${answer}</span>`;
            hintBtn.innerText = "ğŸ’¡ å·²æ˜¾ç¤º";
        }
    }

    function checkAnswer() {
        const item = currentList[currentIndex];
        const input = document.getElementById('answerInput').value.trim().toLowerCase();
        const feedbackEl = document.getElementById('feedback');
        let isCorrect = false;
        
        const cleanInput = input.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");
        
        if (mode === 'cn-to-en') {
            const target = item.en.toLowerCase();
            if (cleanInput === target.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"")) {
                isCorrect = true;
            }
        } else {
            if (input === item.cn || (input.length > 1 && item.cn.includes(input))) {
                isCorrect = true;
            }
        }

        if (isCorrect) {
            feedbackEl.innerText = "ğŸ‰ å›ç­”æ­£ç¡®!";
            feedbackEl.className = 'feedback correct';
            speakCurrentWord(); // Optional: Auto speak on correct
            setTimeout(() => {
                nextWord();
            }, 1200);
        } else {
            feedbackEl.innerHTML = `âŒ é”™è¯¯! <br> æ­£ç¡®ç­”æ¡ˆ: ${mode === 'cn-to-en' ? item.en : item.cn}`;
            feedbackEl.className = 'feedback wrong';
            speakCurrentWord(); // Auto speak on error too so they hear it
            addToMistakes(item);
        }
    }

    function nextWord() {
        // Increment Index
        currentIndex = (currentIndex + 1) % currentList.length;
        loadWord();
    }

    // NEW: Previous Word Function
    function prevWord() {
        // Decrement Index with wrap-around logic
        currentIndex = (currentIndex - 1 + currentList.length) % currentList.length;
        loadWord();
    }

    function addToMistakes(item) {
        if (!mistakes.find(m => m.en === item.en)) {
            mistakes.push(item);
            renderMistakes();
        }
        document.getElementById('mistakeSection').style.display = 'block';
    }

    function renderMistakes() {
        const list = document.getElementById('mistakeList');
        const count = document.getElementById('mistakeCount');
        list.innerHTML = '';
        count.innerText = mistakes.length;

        mistakes.forEach(m => {
            const li = document.createElement('li');
            li.className = 'mistake-item';
            li.innerHTML = `
                <span class="word" onclick="speakText('${m.en.replace(/'/g, "\\'")}')">ğŸ”Š ${m.en}</span>
                <span>${m.cn}</span>
            `;
            list.appendChild(li);
        });
    }

    function clearMistakes() {
        mistakes = [];
        renderMistakes();
        document.getElementById('mistakeSection').style.display = 'none';
    }
</script>

</body>
</html>